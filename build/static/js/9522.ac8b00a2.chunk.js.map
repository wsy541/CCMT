{"version":3,"file":"static/js/9522.ac8b00a2.chunk.js","mappings":"0LACO,SAASA,EAAaC,EAASC,GACpC,GAAID,GAAWE,EAAM,CAEnB,IAOIC,EAPEC,EAAOF,EAAAA,KAAUF,GACjBK,EAAQD,EAAK,GAAKA,EAAK,GAEvBE,GADSF,EAAK,GAAKA,EAAK,IACPC,EACjBE,EAASN,EAAEI,MAEXG,EADUP,EAAEQ,OACOF,EAGzB,GAAIC,GAAUF,EAAO,CACnB,IAAMI,GAAgBF,EAASF,GAAS,EAAIE,EAC5CL,EAAQ,CACNQ,EAAG,CACDC,MAAO,CAAC,EAAG,IAEbC,EAAG,CACDD,MAAO,CAACF,EAAc,EAAIA,SAGzB,CACL,IAAMA,GAAgB,EAAIF,EAAS,EAAIF,GAAS,EAAIE,EACpDL,EAAQ,CACNU,EAAG,CACDD,MAAO,CAAC,EAAG,IAEbD,EAAG,CACDC,MAAO,CAACF,EAAc,EAAIA,KAKhC,IAAMI,EAAiBb,EAAEc,gBAAgB,KAAKH,MACxCI,EAAiBf,EAAEc,gBAAgB,KAAKH,MAE1CE,EAAe,KAAOX,EAAMQ,EAAEC,MAAM,IAAME,EAAe,KAAOX,EAAMQ,EAAEC,MAAM,IAAMI,EAAe,KAAOb,EAAMU,EAAED,MAAM,IAAMI,EAAe,KAAOb,EAAMU,EAAED,MAAM,IACpKK,YAAW,WACThB,EAAEE,MAAMA,GACRF,EAAEiB,QAAO,KACR","sources":["pages/visualization/multi-dimension-data-analysis/utils/map.ts"],"sourcesContent":["import * as turf from '@turf/turf';\nexport function keepMapRatio(mapData, c) {\n  if (mapData && turf) {\n    // 获取数据外接矩形，计算宽高比\n    const bbox = turf.bbox(mapData);\n    const width = bbox[2] - bbox[0];\n    const height = bbox[3] - bbox[1];\n    const ratio = height / width;\n    const cWidth = c.width;\n    const cHeight = c.height;\n    const cRatio = cHeight / cWidth;\n    let scale;\n\n    if (cRatio >= ratio) {\n      const halfDisRatio = (cRatio - ratio) / 2 / cRatio;\n      scale = {\n        x: {\n          range: [0, 1]\n        },\n        y: {\n          range: [halfDisRatio, 1 - halfDisRatio]\n        }\n      };\n    } else {\n      const halfDisRatio = (1 / cRatio - 1 / ratio) / 2 * cRatio;\n      scale = {\n        y: {\n          range: [0, 1]\n        },\n        x: {\n          range: [halfDisRatio, 1 - halfDisRatio]\n        }\n      };\n    }\n\n    const curScaleXRange = c.getScaleByField('x').range;\n    const curScaleYRange = c.getScaleByField('y').range;\n\n    if (curScaleXRange[0] !== scale.x.range[0] || curScaleXRange[1] !== scale.x.range[1] || curScaleYRange[0] !== scale.y.range[0] || curScaleYRange[1] !== scale.y.range[1]) {\n      setTimeout(() => {\n        c.scale(scale);\n        c.render(true);\n      }, 1);\n    }\n  }\n}"],"names":["keepMapRatio","mapData","c","turf","scale","bbox","width","ratio","cWidth","cRatio","height","halfDisRatio","x","range","y","curScaleXRange","getScaleByField","curScaleYRange","setTimeout","render"],"sourceRoot":""}