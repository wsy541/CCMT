"use strict";(self.webpackChunkarco_design_pro=self.webpackChunkarco_design_pro||[]).push([[9260,8581,842],{62914:function(e,t,n){n.r(t);n(47872);var a=n(82357),r=n(25633),c=n(4519),i=n(76082),l=n(43270),o=n.n(l),s=n(50842);t.default=function(e){var t=(0,i.k6)();return c.createElement(a.Z,{className:o()(s.default["card-block"],s.default["add-card"]),title:null,bordered:!0,size:"small",onClick:function(){t.push("/metarelation/add")}},c.createElement("div",{className:s.default.content},c.createElement("div",{className:s.default["add-icon"]},c.createElement(r.Z,null)),c.createElement("div",{className:s.default.description},e.description)))}},24328:function(e,t,n){n.r(t);var a=n(4942),r=(n(15861),n(29439)),c=(n(87757),n(47872),n(82357)),i=(n(36287),n(73575)),l=n(23116),o=(n(70198),n(51993)),s=(n(4316),n(30894)),d=(n(63915),n(19050)),u=n(23743),m=(n(63793),n(79721)),f=n(94922),p=(n(35749),n(29413)),h=(n(56710),n(86721)),g=(n(2373),n(39230)),L=(n(74450),n(91862)),E=n(4519),b=n(43270),Z=n.n(b),v=n(5001),y=n(98581),S=n(50842),C=n(82399);function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k.apply(this,arguments)}var N=L.Z.Paragraph,x=g.Z.Item;t.default=function(e){var t=e.card,n=void 0===t?{}:t,L=(0,E.useState)(!1),b=(0,r.Z)(L,2),w=b[0],q=b[1],O=(0,E.useState)(n.status),T=(0,r.Z)(O,2),A=T[0],j=T[1],I=(0,E.useState)(e.loading),z=(0,r.Z)(I,2),M=z[0],R=z[1],B=(0,E.useContext)(C.k),P=(B.userId,B.setUserId,B.token),D=(B.setToken,(0,E.useState)(!1)),F=(0,r.Z)(D,2),U=F[0],_=F[1],J=(0,E.useState)(!1),G=(0,r.Z)(J,2),V=(G[0],G[1],(0,E.useState)(!1)),K=(0,r.Z)(V,2),Q=K[0],W=K[1],H=g.Z.useForm(),X=(0,r.Z)(H,1)[0],Y=(0,E.useState)("0"),$=(0,r.Z)(Y,2),ee=$[0],te=$[1],ne=(0,v.Z)(y.default),ae=[ne["cardList.change.name"],ne["cardList.change.description"],ne["cardList.change.constant"]],re=n.description.replaceAll(":",":\n").replaceAll("]","]\n");(0,E.useEffect)((function(){R(e.loading)}),[e.loading]),(0,E.useEffect)((function(){n.status!==A&&j(n.status)}),[n.status]);var ce=Z()(S.default["card-block"],S.default["service-card"]);function ie(){var e={query:"\n        mutation {\n              deleteMr (mrId:".concat(n.id,") \n          }\n        ")};fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){})).catch((function(e){console.log(e)})).finally()}return E.createElement(c.Z,{bordered:!0,className:ce,size:"small",title:M?E.createElement(d.Z,{animation:!0,text:{rows:1,width:["100%"]},style:{width:"120px",height:"24px"},className:S.default["card-block-skeleton"]}):E.createElement(E.Fragment,null,E.createElement("div",{className:Z()(S.default.title,(0,a.Z)({},S.default["title-more"],w))},n.title,function(){if(A)return E.createElement(m.Z,{color:"green",icon:E.createElement(f.Z,null),className:S.default.status,size:"small"},ne["cardList.tag.activated"]);switch(A){case 1:return E.createElement(m.Z,{color:"green",icon:E.createElement(f.Z,null),className:S.default.status,size:"small"},ne["cardList.tag.opened"]);case 2:return E.createElement(m.Z,{color:"red",icon:E.createElement(u.Z,null),className:S.default.status,size:"small"},ne["cardList.tag.expired"]);default:return null}}(),E.createElement(i.Z,{droplist:E.createElement(s.Z,{onClickMenuItem:function(e){_(!0),te(e)}},ae.map((function(e,t){return E.createElement(s.Z.Item,{key:t.toString()},e)}))),trigger:"click",onVisibleChange:q,popupVisible:w},E.createElement(h.Z,{title:ae[ee],visible:U,onOk:function(){console.log(re),"0"===ee?X.validate().then((function(e){W(!0),console.log({res:e});var t={query:"\n        mutation {\n              changeMrName (mrId:".concat(n.id,',content:"').concat(e.content,'") {\n                id\n                title\n            }\n          }\n        ')};fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){q(!1),W(!1),location.reload()})).catch((function(e){console.log(e)})).finally()})):"1"===ee?X.validate().then((function(e){W(!0),console.log({res:e});var t={query:"\n        mutation {\n              changeMrDescription (mrId:".concat(n.id,',content:"').concat(e.content,'") {\n                id\n                title\n            }\n          }\n        ')};fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){q(!1),W(!1),location.reload()})).catch((function(e){console.log(e)})).finally()})):X.validate().then((function(e){W(!0);var t=Number(e.content.toString()),a={query:"\n        mutation {\n              changeMrDescription (eventId:".concat(n.id,",content:").concat(t,") {\n                id\n                title\n            }\n          }\n        ")};fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+P}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){q(!1),W(!1),location.reload()})).catch((function(e){console.log(e)})).finally()}))},confirmLoading:Q,onCancel:function(){return _(!1)}},E.createElement(g.Z,k({},{labelCol:{span:4},wrapperCol:{span:20}},{form:X,labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}}}),E.createElement(x,{label:"Content",field:"content",rules:[{required:!0}]},E.createElement(o.Z,{placeholder:""})))),E.createElement("div",{className:S.default.more},E.createElement(l.Z,null)))))},E.createElement("div",{className:S.default.content},M?E.createElement(d.Z,{text:{rows:3},animation:!0,className:S.default["card-block-skeleton"]}):E.createElement(N,null,n.description.toString().substring(0,110))),E.createElement("div",{className:S.default.extra},E.createElement(p.Z,{loading:M,onClick:function(){return h.Z.confirm({title:ne["cardList.card.confirm"],content:ne["cardList.card.delete"],onConfirm:ie})}},ne["cardList.options.remove"])))}},4256:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(29439),r=(n(47872),n(82357)),c=n(78241),i=n(94109),l=(n(10502),n(29523)),o=(n(70198),n(51993)),s=(n(21400),n(18541)),d=(n(43570),n(95792)),u=(n(74450),n(91862)),m=n(4519),f=n(5001),p=n(98581),h=n(50842),g=n(24328),L=n(82399),E=n(62914),b=u.Z.Title,Z=d.Z.Row,v=d.Z.Col;new Array(10).fill({title:"title",description:"description",id:1});function y(){var e=(0,f.Z)(p.default),t=(0,m.useState)(!0),n=(0,a.Z)(t,2),d=n[0],u=n[1],y=(0,m.useState)({}),S=(0,a.Z)(y,2),C=S[0],k=S[1],N=(0,m.useState)({}),x=(0,a.Z)(N,2),w=x[0],q=x[1],O=(0,m.useContext)(L.k),T=(O.userId,O.setUserId,O.token),A=(O.setToken,(0,m.useState)("all")),j=(0,a.Z)(A,2),I=j[0],z=j[1],M=(0,m.useState)([]),R=(0,a.Z)(M,2),B=R[0],P=(R[1],[]),D=(s.Z.Node,(0,m.useState)(!0)),F=(0,a.Z)(D,2),U=F[0],_=F[1],J=(0,m.useState)(!0),G=(0,a.Z)(J,2),V=G[0],K=G[1],Q=(0,m.useState)(!0),W=(0,a.Z)(Q,2),H=W[0],X=W[1],Y=(0,m.useState)(!0),$=(0,a.Z)(Y,2),ee=$[0],te=$[1],ne=(0,m.useState)(!0),ae=(0,a.Z)(ne,2),re=ae[0],ce=ae[1];(0,m.useEffect)((function(){u(!0),fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify({query:"\n        query {\n              mrs {\n                  id\n                  title\n                  description\n                  event {\n                      id\n                      title\n                  }\n              }\n          }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+T}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){P=e.data.mrs;for(var t={},n=0;n<P.length;n++){var a="".concat(P[n].event.title);B.includes(a)?t[a].push(P[n]):(B.push(a),t[a]=[P[n]])}console.log({titleList:B}),console.log(t),k(t)})).catch((function(e){console.log(e)})).finally((function(){return u(!1)})),fetch("http://182.92.125.165:8080/graphql",{method:"POST",body:JSON.stringify({query:"\n        query {\n            events {\n                id\n                title\n            }\n        }\n        "}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+T}}).then((function(e){if(200!==e.status&&201!==e.status)throw new Error("Failed!");return e.json()})).then((function(e){q(e.data.events)})).catch((function(e){console.log(e)})).finally()}),[]);var ie=function(e){return console.log(e),m.createElement(Z,{gutter:24,className:h.default["card-content"]},e.map((function(e,t){return m.createElement(v,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,key:t},m.createElement(g.default,{card:e,loading:d}))})))};return m.createElement(r.Z,null,m.createElement(b,{heading:6},e["menu.events.card"]),m.createElement(l.Z,{activeTab:I,type:"rounded",onChange:z,extra:m.createElement(o.Z.Search,{style:{width:"240px"},placeholder:e["cardList.tab.".concat(I,".placeholder")]})},m.createElement(l.Z.TabPane,{key:"all",title:e["cardList.tab.title.all"]}),Object.entries(w).map((function(e){var t=(0,a.Z)(e,2),n=(t[0],t[1]);return m.createElement(l.Z.TabPane,{key:n.title,title:n.title})}))),m.createElement("div",{className:h.default.container},m.createElement(b,{heading:6}),m.createElement(Z,{gutter:24,className:h.default["card-content"]},m.createElement(v,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6},m.createElement(E.default,{description:e["cardList.add.quality"]}))),"all"===I?Object.entries(C).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return m.createElement("div",{key:n},m.createElement(b,{heading:6,onClick:function(){return function(e){console.log(e),"ACMS"===e?K(!V):"MOS"===e?X(!H):"ERS"===e?te(!ee):"CUBS"===e?ce(!re):_(!U)}(n)}},n,"ACMS"===n?V?m.createElement(i.Z,null):m.createElement(c.Z,null):"MOS"===n?H?m.createElement(i.Z,null):m.createElement(c.Z,null):"ERS"===n?ee?m.createElement(i.Z,null):m.createElement(c.Z,null):"CUBS"===n?re?m.createElement(i.Z,null):m.createElement(c.Z,null):U?m.createElement(i.Z,null):m.createElement(c.Z,null)),"ACMS"===n?V&&ie(r):"MOS"===n?H&&ie(r):"ERS"===n?ee&&ie(r):"CUBS"===n?re&&ie(r):U&&ie(r))})):m.createElement("div",{className:h.default["single-content"]},m.createElement(b,{heading:6,onClick:function(){return _(!U)}},I,U?m.createElement(i.Z,null):m.createElement(c.Z,null)),U&&function(e){if(B.includes(e.toString()))return m.createElement(Z,{gutter:24,className:h.default["card-content"]},C[e.toString()].map((function(e,t){return m.createElement(v,{xs:24,sm:12,md:8,lg:6,xl:6,xxl:6,key:t},m.createElement(g.default,{card:e,loading:d}))})))}(I))))}},98581:function(e,t,n){n.r(t);t.default={"en-US":{"menu.materelation":"MR List","menu.materelation.card":"Card List","cardList.tab.title.all":"All","cardList.tab.title.quality":"Content quality","cardList.tab.title.service":"Service opening","cardList.tab.title.rules":"Rule presets","cardList.tab.all.placeholder":"Search","cardList.tab.quality.placeholder":"Search queue","cardList.tab.service.placeholder":"Search service","cardList.tab.rules.placeholder":"Search rule","cardList.searchInput.placeholder":"Search service","cardList.add.quality":"Create new MR","cardList.enable":"Enable","cardList.disable":"Disable","cardList.action":"action","cardList.detail":"Detail","cardList.tab.title.announcement":"Recent Announcement","cardList.announcement.noData":"No announcement","cardList.statistic.enable":"Enable","cardList.statistic.disable":"Disable","cardList.statistic.applicationNum":"Applications","cardList.options.qualityInspection":"Quality inspection","cardList.options.remove":"Remove","cardList.options.cancel":"Cancel","cardList.change.name":"Change Name","cardList.change.description":"Change Description","cardList.change.constant":"Change Constant","cardList.options.subscribe":"Subscribe","cardList.options.renewal":"Renewal","cardList.tag.activated":"Activated","cardList.tag.opened":"Already Opened","cardList.tag.expired":"Expired","cardList.card.confirm":"Confirm","cardList.card.delete":"Do you sure you want to delete?"},"zh-CN":{"menu.materelation":"\u8715\u53d8\u5173\u7cfb","menu.materelation.card":"\u8715\u53d8\u5173\u7cfb\u5361\u7247","cardList.tab.title.all":"\u5168\u90e8","cardList.tab.title.quality":"\u5185\u5bb9\u8d28\u68c0","cardList.tab.title.service":"\u670d\u52a1\u5f00\u901a","cardList.tab.title.rules":"\u89c4\u5219\u9884\u7f6e","cardList.tab.all.placeholder":"\u641c\u7d22","cardList.tab.quality.placeholder":"\u641c\u7d22\u961f\u5217","cardList.tab.service.placeholder":"\u641c\u7d22\u670d\u52a1","cardList.tab.rules.placeholder":"\u641c\u7d22\u89c4\u5219","cardList.searchInput.placeholder":"\u641c\u7d22\u670d\u52a1","cardList.add.quality":"\u70b9\u51fb\u521b\u5efa\u8715\u53d8\u5173\u7cfb","cardList.enable":"\u542f\u7528","cardList.disable":"\u7981\u7528","cardList.action":"\u64cd\u4f5c","cardList.detail":"\u8be6\u7ec6\u4fe1\u606f","cardList.tab.title.announcement":"\u6700\u8fd1\u516c\u544a","cardList.announcement.noData":"\u6682\u65e0\u516c\u544a","cardList.statistic.enable":"\u5df2\u542f\u7528","cardList.statistic.disable":"\u672a\u542f\u7528","cardList.statistic.applicationNum":"\u5e94\u7528\u6570","cardList.options.qualityInspection":"\u8d28\u68c0","cardList.options.remove":"\u5220\u9664","cardList.options.cancel":"\u53d6\u6d88\u5f00\u901a","cardList.options.subscribe":"\u5f00\u901a\u670d\u52a1","cardList.options.renewal":"\u7eed\u7ea6\u670d\u52a1","cardList.tag.activated":"\u5df2\u542f\u7528","cardList.tag.opened":"\u5df2\u5f00\u901a","cardList.tag.expired":"\u5df2\u8fc7\u671f","cardList.change.name":"\u66f4\u6362\u540d\u79f0","cardList.change.description":"\u66f4\u6362\u5185\u5bb9","cardList.change.constant":"\u66f4\u6362\u53c2\u6570"}}},50842:function(e,t,n){n.r(t),t.default={container:"container--m9ca6","card-content":"card-content--zpGKo","single-content":"single-content--bbv_j","card-block":"card-block--aRn1U",title:"title--gbP4_",icon:"icon--XR5wW",status:"status--EFoh0",more:"more--NlsKt","title-more":"title-more--iS36C",time:"time--bEt_S",content:"content--GOamd",extra:"extra--xxh1v","card-block-skeleton":"card-block-skeleton--oLzBT","add-card":"add-card--Gar0H","add-icon":"add-icon--sQZ12",description:"description--ICW60","service-card":"service-card--h9Rak","rules-card":"rules-card--u5RcN","list-demo-actions-icon":"list-demo-actions-icon--e4AMp","list-demo-actions-button":"list-demo-actions-button--GzILV","list-demo-actions":"list-demo-actions--gSU76","arco-list-item-action":"arco-list-item-action--Buq_g"}}}]);
//# sourceMappingURL=9260.d866cb52.chunk.js.map